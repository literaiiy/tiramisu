{% extends "index.html" %}
{% block head %}
    <head>
        <title>Profile for {{ username }} | tiramisu</title>
        <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
    </head>
{% endblock %}

{% block content %}
<body>
    <div class='grid sm:grid-cols-1 lg:grid-cols-10 gap-6'>

        <!--- NAME HISTORY --->
        <div class='namehistable col-start-2 col-span-4 bg-gray-100 p-6 rounded-2xl shadow overflow-scroll overflow-x-hidden'>
            <table id="table_id" class="compact hover order-column">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Name</th> 
                        <th>Time changed</th>
                        <th>Duration had</th>
                    </tr>
                </thead>
                <tbody>
                    {% for dict_item in namehis %}
                    <tr>
                        {% for value in dict_item.values() %}
                            {% if value|int != 0 %}
                                <td><b>{{ value }}</b></td>
                            {% elif value == namehis[0]['name'] %}
                                <td style="color:midnightblue"><a href="/p/{{ value }}" style="text-decoration:none" >{{ value }}</a></td>
                            {% elif value == namehis[namehis|length-1]['name'] %}
                                <td style="color:rgb(135, 170, 235)"><a class="nhfirst" href="/p/{{ value }}" style="text-decoration:none" >{{ value }}</a></td>
                            {% elif value in dict_item['name'] %}
                                <td style="color:rgb(107, 137, 221)"><a class="nhmiddle" href="/p/{{ value }}" style="text-decoration:none" >{{ value }}</a></td>
                            {% else %}
                                <td>{{ value }}</td>
                            {% endif %}
                        {% endfor %}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <script src='/static/table.js'></script>
        </div>

        <!------ PLAYER IMAGE ------>
        <div class="image justify-self-center"><img src='https://mc-heads.net/body/{{uuid}}'><br></div>

        <!------ PLAYER DESC ------>
        <div class="col-span-3 align-start">
            <!--- USERNAME --->
            <div id='username' class=' lg:text-3xl'>
                {% if rank == 'YOUTUBE' %}
                <b><span class='{{rankColorParsed}}'>[<span class='{{plusColorParsed}}'>{{rank}}</span>]</b></span>
                {% elif rank != '' %}
                <b><span class='{{rankColorParsed}}'>[{{rank}}<span class='{{plusColorParsed}}'>{{rankPlusses}}</span>]</b></span>
                {% endif %}
                {{username}}
                {% if guildDict['tag'] %}
                <b><span class='{{guildDict["tagColor"]}}'> [{{ guildDict['tag'] }}]<span></b>{{displayAddon}}
                {% endif %}
                {#% if guildList[0] %}
                <b><span class='{{ guildList[3] }}'> [{{ guildList[0] }}]<span></b>{{displayAddon}}
                {% endif %#}
            </div>

            <div id='uuid' class=" text-xl font-extralight">
                {{ uuid }}
            </div>

            <!--- SESSION --->
            <p>
                {% if currentSession  %}
                    <span class='dark_green'>Playing <b>{{ currentSession }}</b> - in <b>{{ sessionType }}</b></span>
                {% else %}
                    <b class='red'>Offline</b>
                        {% if lastSeenUnix < 756864000 %}
                            - last seen <b>{{lastSeen}}</b> ago playing <b>{{lastPlayed}}</b>
                        {% endif %}
                {% endif %}
            </p>

            <!--- LEVEL --->
            <p>
                Level <b>{{ level }} {{ multiplier }}</b> / <b>{{ levelProgress }}%</b> to <b>{{ levelplusone }}</b><br>
            </p>

            <!-- K A Q -->
            <p>
                karma is <b class='light_purple'>{{ reqList| those }}</b><br>
                <b>{{ achievements| those }}</b> achievements for <b>{{ achpot| those }}</b> achievement points<br>
                <b class="yellow">{{ quests| those }}</b> quests finished<br>
            </p>

            <!-- TOTAL KILLS WINS COINS -->
            <p>
                <b>Total coins</b>: {{totalCoins| those}} <br>
                <b>Total kills</b>: {{totalKills| those}} <br>
                <b>Total wins</b>: {{totalWins| those}} <br>
            </p>

            <!--- GUILD --->
                {% if guildDict['success'] %} 
                    <p>Rank <b>{{guildDict['selfGuildRank']}}</b> in guild <b>{{guildDict['name']}}</b>
                    {% if guildDict['tag'] %}
                        <b class="{{guildDict['tagColor']}}">[{{guildDict['tag']}}]</b>
                   {% endif %}
                {% endif %}

                {#% if guildList[0] != 0 %}
                    <p><b>{{ guildList[2] }}</b> in guild <b>{{ guildList[1] }}<span class='{{ guildList[3] }}'> [{{ guildList[0] }}]<span></b></p>
                {% endif %#}

            <p>
                <!--- SENIORITY  --->
                {% if firstLoginUnix > 1357027200 %}
                <span class="{{ seniority[2] }}">{{ seniority[0] }} <b>Hypixel {{seniority[1]}}</b></span> - Joined {{ joinedAgoText }} ago<br>
                {% endif %}
            
                <!--- RANK SENIORITY --->
                {% if boughtPastTime != 0 %}
                    {% if newPackageRank == 'MVP_PLUS' %}
                        <b class='aqua'>[MVP<span class='red'>+</span>]</b> bought <b>{{boughtPastTime}}</b> - <b>{{boughtPastRank}}</b> ago
                    {% elif newPackageRank == 'MVP' %}
                        <b class='aqua'>[MVP]</b> bought <b>{{boughtPastTime}}</b> - <b>{{boughtPastRank}}</b> ago
                    {% elif newPackageRank == 'VIP_PLUS' %}
                        <b class='lime'>[VIP<span class='gold'>+</span>]</b> bought <b>{{boughtPastTime}}</b> - <b>{{boughtPastRank}}</b> ago
                    {% elif newPackageRank == 'VIP' %}
                        <b class='lime'>[VIP]</b> bought <b>{{boughtPastTime}}</b> - <b>{{boughtPastRank}}</b> ago
                    {% endif %}
                {% else %}
                ...
                {% endif %}
            </p>

            <p>
                <!--- LAST SESSION/LAST LOGOUT/FIRST/LAST LOGIN --->
                {% if lastSession  %}
                    Last session: <b>{{ lastSession }}</b><br>
                {% endif %}
                {% if lastLogoutUnix != 1 %}
                    Last logout: <b>{{ lastLogout }}</b><br>
                {% endif %}
                {% if lastLoginUnix != 1 %}
                    Last login: <b>{{ lastLogin }}</b><br>
                {% endif %}
                {% if firstLoginUnix != 1 %}
                    First login: <b>{{ firstLogin }}</b>
                {% else %}
                ...
                {% endif %}
            </p>

            <p>
                <!--- SOCIAL MEDIA --->
                {% if twitter != [] %}
                    <span class="twitter"><b>Twitter: </b></span><a href='{{ twitter[1] }}'>@{{ twitter[0] }}</a><br>
                {% endif %}
                {% if instagram != [] %}
                    <span class="instagram"><b>Instagram: </b></span><a href='{{ instagram[1] }}'>@{{ instagram[0] }}</a><br>
                {% endif %}
                {% if twitch != [] %}
                    <span class="twitch"><b>Twitch: </b></span><a href='{{ twitch[1] }}'>@{{ twitch[0] }}</a><br>
                {% endif %}
                {% if discord != '' and 'discord.gg' not in discord %}
                    <span class="discord"><b>Discord: </b></span>@{{ discord }}<br>
                {% elif 'https://discord.gg' in discord or 'http://discord.gg' in discord %}
                    <span class="discord"><b>Discord:</b></span> <a href='{{ discord }}'>{{ discord }}</a><br>
                {% elif 'discord.gg' in discord %}
                    <span class="discord"><b>Discord: </b></span> <a href='https://{{ discord }}'>{{ discord }}</a><br>
                {% endif %}
                {% if hypixelForums != [] %}
                    <span class="hypixelForums"><b>Hypixel Forums:</b></span> <a href='{{ hypixelForums[1] }}'>@{{ hypixelForums[0] }}</a><br>
                {% endif %}
                {% if youtube != [] %}
                    <span class="youtube"><b>YouTube: </b></span><a href='{{ youtube[1] }}'>{{ youtube[0] }}</a><br>
                {% endif %}
            </p>

            <!-- LANG/GIFTS/VERSION -->
            <p>
                <b>Language</b>: {{userLanguage}}<br>
                <b>Sent</b> {{giftsSent| those}} gifts, <b>received</b> {{giftsReceived| those}}<br>
                Plays on <b>{{userVersion}}</b><br>
            </p>

            <!-- REWARDS -->
            <p>
                <b>Reward streak</b>: {{rewards['streak_current']| those}} (Best: {{rewards['streak_best']| those}}) <br>
                <b>Rewards claimed</b>: {{rewards['claimed']| those}} ({{rewards['claimed_daily']| those}} daily)
            </p>
        </div>

    <!------ PLAYER STATS ------>

        <!--- SkyWars --->
        <div class='col-start-2 col-end-10 bg-gray-100 rounded-2xl text-4xl font-bold p-6 shadow text-center'>SkyWars</div>

            <!-- Overall -->
            <div id='overall' class="col-start-2 col-end-6 row-span-2 bg-gray-100 p-6 rounded-2xl shadow divide-y divide-gray-300">
                <div class="text-3xl font-semibold pb-5">Overall</div>
                <div class='pt-5'>
                    {% if swBestGame[1]  %}
                        {{ username }} plays <b>{{ swBestGame[1] }}</b> most often, with <b>{{ swBestGame[0]| those}}</b> games played.
                    {% endif %}
                    <div class="grid grid-cols-2">
                        <div>
                            <p>
                                <b><span class="{{ swUnscannedDict['prestige'][1] }}">[{{ swUnscannedDict['level'] }}{{swUnscannedDict['presIcon']}}]</span> {{username}}</b><br>
                                <b class="{{ swUnscannedDict['prestige'][1] }}">{{ swUnscannedDict['prestige'][0] }}</b> Prestige<br>
                                <span class="{{ swUnscannedDict['prestige'][1] }}"><b>{{swUnscannedDict['xpRemainder']| those}} XP ({{ swUnscannedDict['xpRemainderPerc'] }}%)</b></span> to <b>{{ swUnscannedDict['level']+1 }}</b><br>
                                <b class="{{ swUnscannedDict['prestige'][1] }}">{{ swStatsDict['skywars_experience']| those }}</b> SkyWars experience <br>
                                <b>{{swUnscannedDict['xpRemainder']| those}}</b> kills or <b>{{swUnscannedDict['winsRemainder']| those}}</b> wins to level up<br>
                                <b class='{{ swUnscannedDict["head_tastiness"][1] }}'>{{ swUnscannedDict['head_tastiness'][0] }}</b> head <br>
                            </p>
                            <p>
                                <b>{{ swUnscannedDict['games_played']| those }}</b> games played <br>
                                <b>{{ swStatsDict['quits']| those }}</b> games quit<br>
                                <b>{{ swUnscannedDict['K/D'] }}</b> K/D<br>
                                <b>{{ swUnscannedDict['KDA'] }}</b> K/D/A<br>
                                <b>{{ swStatsDict['kills']| those }}</b> kills<br>
                                <b>{{ swStatsDict['assists']| those }}</b> assists <br>
                                <b>{{ swStatsDict['deaths']| those }}</b> deaths<br>
                            </p>
                            <p>
                                <b>{{ swUnscannedDict['W/L'] }}</b> W/L <br>
                                <b>{{ swUnscannedDict['winrate'] }}%</b> win rate <br>
                                <b>{{ swStatsDict['wins']| those }}</b> wins<br>
                                <b>{{ swStatsDict['losses']| those }}</b> losses <br>
                                <b>{{ swStatsDict['survived_players']| those }}</b> players survived <br>
                            </p>
                            <p>
                                <b>{{ swStatsDict['win_streak']| those }}</b> winstreak <br>
                                Corruption chance: <b>{{swStatsDict['angel_of_death_level']}}%</b><br>
                                <b>{{ swStatsDict['chests_opened']| those }}</b> chests opened<br>
                                <b>{{swStatsDict['refill_chest_destroy']| those}}</b> refill chests destroyed <br>
                            </p>
                        </div>
                        <div>
                            <p>
                                <b class='gold'>{{ swStatsDict['coins']| those }}</b> coins <br>
                                <b class='dark_green'>{{swStatsDict['cosmetic_tokens']| those}}</b> tokens <br>
                                <b class='aqua'>{{ swStatsDict['souls']| those }}</b> souls <br>
                                <b class='light_purple'>{{ swStatsDict['heads']| those }}</b> heads <br>
                            </p>
                            <p>
                                <b>{{swStatsDict['blocks_placed']| those}}</b> blocks placed <br>
                                <b>{{ swStatsDict['blocks_broken']| those }}</b> blocks broken <br>
                                <b>{{ swStatsDict['arrows_shot']| those }}</b> arrows shot <br>
                                <b>{{ swStatsDict['arrows_hit']| those }}</b> arrows hit<br>
                                <b>{{ swUnscannedDict['arrow_hitrate'] }}%</b> arrow hit rate<br>
                                <b>{{ swStatsDict['egg_thrown']| those }}</b> eggs thrown <br>
                                <b>{{ swStatsDict['enderpearls_thrown']| those}}</b> ender pearls thrown <br>
                            </p>
                            <p>
                                Fastest win: <b>{{ swStatsDict['fastest_win'] }}</b> <br>
                                Highest-kill game: <b>{{ swStatsDict['most_kills_game'] }} kills</b><br>
                                Farthest bow kill: <b>{{swStatsDict['longest_bow_kill']}} blocks</b> ({{(swStatsDict['longest_bow_kill'] * 3.2808)| int}} ft.)<br>
                            </p>
                            <p>
                                <b>{{ swUnscannedDict['K/W'] }}</b> kills per win <br>
                                <b>{{ swUnscannedDict['K/L'] }}</b> kills per loss <br>
                                <b>{{ swUnscannedDict['K/G'] }}</b> kills per game <br>
                                <b>{{ swUnscannedDict['blocks_placed_per_game'] }}</b> blocks placed per game <br>
                                <b>{{ swUnscannedDict['arrows_per_game'] }}</b> arrows shot per game <br>
                                <b>{{ swUnscannedDict['arrows_hit_per_game'] }}</b> arrows hit per game <br>
                                <b>{{ swUnscannedDict['eggs_per_game'] }}</b> eggs thrown per game <br>
                                <b>{{swUnscannedDict['pearls_per_game']}}</b> ender pearls thrown per game <br>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SW MODE -->
            <div id='by-mode' class='col-start-6 col-end-10 bg-gray-100 rounded-2xl p-6 shadow divide-y divide-gray-300'>
                {% if swUnscannedDict['games_played'] > 0 %}
                    <div class="tabForYes pb-5">
                        {% for y, x in gamemodes.items() %}
                            {% if x['games_played'] != 0 %}
                                <button class="tablinks text-2xl text-gray-600 font-bold" onclick="openCity(event, '{{y}}')" id='defaultOpen'>{{y}}</button>
                            {% endif %}
                        {% endfor %}
                    </div>
                    {% for y, x in gamemodes.items() %}
                        {% if x['games_played'] != 0 %}
                        <div id="{{y}}" class="tabcontent pt-5">
                            <p>
                                {% if x["K/D"] > 100000 %}
                                    {{username}} is unkillable in <b>{{y}}</b>! <br>
                                    <span class='almost'><b>infinite</b></span> K/D
                                    {% if x['W/L'] > 100000 %}
                                        & <span class='almost'><b>infinite</b></span> W/L. Awesome!
                                    {% elif x['wlrel'] > 0 %}
                                        & <b>{{ x['wlrel']|abs }}</b> higher W/L (<span class='dark_green'>+{{ x['wlrelperc']|abs }}%</span>). Nice work!
                                    {% elif x['wlrel'] < 0 %}
                                        & <b>{{ x['wlrel']|abs }}</b> lower W/L (<span class='red'>{{ x['wlrelperc'] }}%</span>). Nice work!
                                    {% endif %}

                                {% elif x['kdrel'] > 0 %}
                                    {{username}} performs better in <b><b>{{y}}</b></b> than overall <br>
                                    <b>{{ x['kdrel']|abs }}</b> higher K/D (<span class='dark_green'>+{{ x['kdrelperc'] }}%</span>)
                                    {% if x['W/L'] > 100000 %}
                                        & <span class='almost'><b>infinite</b></span> W/L. Nice work!
                                    {% elif x['wlrel'] > 0 %}
                                        & <b>{{ x['wlrel']|abs }}</b> higher W/L (<span class='dark_green'>+{{ x['wlrelperc']|abs }}%</span>).
                                    {% elif x['wlrel'] < 0 %}
                                        & <b>{{ x['wlrel']|abs }}</b> lower W/L (<span class='red'>{{ x['wlrelperc'] }}%</span>).
                                    {% endif %}
                                    
                                {% elif x['kdrel'] < 0  %}
                                    {{username}} performs worse in <b><b>{{y}}</b></b> than overall <br>
                                    <b>{{ x['kdrel']|abs }}</b> lower K/D (<span class='red'>{{x['kdrelperc'] }}%</span>)
                                    {% if x['W/L'] > 100000 %}
                                        & <span class='almost'><b>infinite</b></span> W/L. Nice work!
                                    {% elif x['wlrel'] > 0 %}
                                        & <b>{{ x['wlrel']|abs }}</b> higher W/L (<span class='dark_green'>+{{ x['wlrelperc']|abs }}%</span>).
                                    {% elif x['wlrel'] < 0 %}
                                        &  <b>{{ x['wlrel']|abs }}</b> lower W/L (<span class='red'>{{ x['wlrelperc'] }}%</span>).
                                    {% endif %}
                                {% else %}
                                    {{username}} performs as average in <b><b>{{y}}</b></b>.
                                {% endif %}
                            </p>
                            <div class="grid grid-cols-2">
                                <div>
                                    <br><b>{{ x['kills']| those }}</b> kills <b>({{ x['kills%']|round(2) }}%)</b>
                                    <br><b>{{ x['deaths']| those }}</b> deaths <b>({{ x['deaths%']|round(2) }}%)</b>
                                    <br><b>{{x['assists']| those}}</b> assists  <b>({{ x['assists%']|round(2) }}%)</b>
                                    {% if x["K/D"] > 100000 %}
                                        <br><b>∞</b> K/D
                                    {% else %}
                                        <br><b>{{ x["K/D"] }}</b> K/D
                                    {% endif %}
                                    <br><b>{{ x['survived_players']| those }}</b> players survived <b>({{ x['survived_players%']|round(2) }}%)</b>
                                    <br><b>{{x['games_played']| those}}</b> games played <b>({{ x['games_played%']|round(2) }}%)</b>
                                </div>
                                <div>
                                    <br><b>{{x['wins']| those}}</b> wins <b>({{ x['wins%']|round(2) }}%)</b>
                                    <br><b>{{x['losses']| those}}</b> losses <b>({{ x['losses%']|round(2) }}%)</b>
                                    {% if x['W/L'] > 100000 %}
                                        <br><b>∞</b> W/L - <b>∞%</b> win rate
                                    {% else %}
                                        <br><b>{{ x['W/L'] }}</b> W/L - <b>{{x['winperc']}}%</b> win rate
                                    {% endif %}
                                    {% if y != 'Laboratory' %}
                                        <br><b>{{x['kit']}}</b> currently equipped
                                    {% endif %}
                                    <br>Fastest win: <b>{{x['fastest_win']}}</b>
                                    <br>Highest-kill game: <b>{{x['most_kills_game']}} kills</b>
                                </div>
                            </div>
                        </div>
                        {% endif %}
                    {% endfor %}
                {% else %}
                <p>No stats to show!</p>
                {% endif %}
            </div>

            <!-- SW MODE 2-->
            <div class='col-start-6 col-end-10 bg-gray-100 rounded-2xl p-6 shadow divide-y divide-gray-300'>
                {% if swUnscannedDict['games_played'] > 0 %}
                    <div class="tabForYes2 pb-5">
                        {% for y, x in gamemodes2.items() %}
                            {% if x['games_played'] != 0 %}
                                <button class="tabgaming text-2xl text-gray-600 font-bold" onclick="tabs2(event, '{{y}}')" id='defaultOpen2'>{{y}}</button>
                            {% endif %}
                        {% endfor %}
                    </div>
                    {% for y, x in gamemodes2.items() %}
                        {% if x['games_played'] != 0 %}
                        <div id='{{y}}' class="tabkontent pt-5">
                            <p>
                            {% if x["K/D"] > 100000 %}
                                {{username}} is unkillable in <b>{{y}}</b>! <br>
                                <span class='almost'><b>infinite</b></span> K/D
                                {% if x['W/L'] > 100000 %}
                                    & <span class='almost'><b>infinite</b></span> W/L. Awesome!
                                {% elif x['wlrel'] > 0 %}
                                    & <b>{{ x['wlrel']|abs }}</b> higher W/L (<span class='dark_green'>+{{ x['wlrelperc']|abs }}%</span>). Nice work!
                                {% elif x['wlrel'] < 0 %}
                                    &  <b>{{ x['wlrel']|abs }}</b> lower W/L (<span class='red'>{{ x['wlrelperc'] }}%</span>). Nice work!
                                {% endif %}

                            {% elif x['kdrel'] > 0 %}
                                {{username}} performs better in <b>{{y}}</b> than overall <br>
                                <b>{{ x['kdrel']|abs }}</b> higher K/D (<span class='dark_green'>+{{ x['kdrelperc'] }}%</span>)
                                {% if x['W/L'] > 100000 %}
                                    & <span class='almost'><b>infinite</b></span> W/L. Nice work!
                                {% elif x['wlrel'] > 0 %}
                                    & <b>{{ x['wlrel']|abs }}</b> higher W/L (<span class='dark_green'>+{{ x['wlrelperc']|abs }}%</span>).
                                {% elif x['wlrel'] < 0 %}
                                    & <b>{{ x['wlrel']|abs }}</b> lower W/L (<span class='red'>{{ x['wlrelperc'] }}%</span>).
                                {% endif %}
                                
                            {% elif x['kdrel'] < 0  %}
                                {{username}} performs worse in <b>{{y}}</b> than overall <br>
                                <b>{{ x['kdrel']|abs }}</b> lower K/D (<span class='red'>{{x['kdrelperc'] }}%</span>)
                                {% if x['W/L'] > 100000 %}
                                    & <span class='almost'><b>infinite</b></span> W/L. Nice work!
                                {% elif x['wlrel'] > 0 %}
                                    & <b>{{ x['wlrel']|abs }}</b> higher W/L (<span class='dark_green'>+{{ x['wlrelperc']|abs }}%</span>).
                                {% elif x['wlrel'] < 0 %}
                                    &  <b>{{ x['wlrel']|abs }}</b> lower W/L (<span class='red'>{{ x['wlrelperc'] }}%</span>).
                                {% endif %}
                            {% else %}
                                {{username}} performs as average in Solo.
                            {% endif %}
                            </p>
                            <div class="grid grid-cols-2">
                                <div>
                                    <br><b>{{ x['kills']| those }}</b> kills <b>({{ x['kills%']|round(2) }}%)</b>
                                    <br><b>{{ x['deaths']| those }}</b> deaths <b>({{ x['deaths%']|round(2) }}%)</b>
                                    <br><b>{{x['wins']| those}}</b> wins <b>({{ x['wins%']|round(2) }}%)</b>
                                    <br><b>{{x['losses']| those}}</b> losses <b>({{ x['losses%']|round(2) }}%)</b>
                                </div>
                                <div>
                                    <br><b>{{x['games_played']| those}}</b> games played <b>({{ x['games_played%']|round(2) }}%)</b>
                                    {% if x["K/D"] > 100000 %}
                                        <br><b>∞</b> K/D
                                    {% else %}
                                        <br><b>{{ x["K/D"] }}</b> K/D
                                    {% endif %}
                                    {% if x['W/L'] > 100000 %}
                                        <br><b>∞</b> W/L - <b>100%</b> win rate
                                    {% else %}
                                        <br><b>{{ x['W/L'] }}</b> W/L - <b>{{x['winperc']}}%</b> win rate
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        {% endif %}
                    {% endfor %}
                {% else %}
                <p> No stats to show here, either!</p>
                {% endif %}
            </div>

            <!--- HEADS -->
            <div class='col-start-2 col-end-6 row-span-2 bg-gray-100 rounded-2xl p-6 shadow divide-y divide-gray-300'>
                <div class="text-3xl font-semibold pb-5">Heads</div>
                <div class='py-5 content-center'>
                    {% if swHeadsImpBool[0] %}
                    <div class='text-2xl'>Overall</div>
                    <div class="flex justify-between">
                        <div>
                            {% for item in swHeadsListList[0] %}
                                <b><span class="{{item[2]}}">{{item[0]}}:</b></span> <b>{{item[1]| those}}</b> ({{item[3]}}%)<br>
                            {% endfor %} </p>
                        </div>
                        <div class='headscont'>
                            <canvas id="heads" style="width:100%;height:100%;"></canvas>
                            <script>
                            var ctx = document.getElementById('heads');
                            // @ts-ignore
                            var swHLO = {{swHeadsRaw}};
                            Chart.defaults.global.defaultFontFamily = 'Inconsolata'
                            Chart.defaults.global.defaultFontSize = 15
                            var heads = new Chart(ctx, {
                                type: 'doughnut',
                                responsive: true,
                                maintainAspectRatio:false,
                                options: {
                                    legend: {
                                        display:false,
                                    }
                                },
                                data: {
                                    labels: ['Heavenly', 'Divine', 'Sweet', 'Succulent', 'Tasty', 'Salty', 'Decent', 'Meh', 'Yucky', 'Eww'],
                                    datasets: [{
                                        data: swHLO,
                                        borderWidth: 1,
                                        backgroundColor: ['#a0a', '#fa0', '#5ff', '#f5f', '#0aa', '#5f5', '#ff5', '#ccc', '#aaa', '#555'],
                                    }]
                                },
                            });
                            </script>
                        </div>
                    </div>
                    {% else %}
                    <p>No heads collected.</p>
                    {% endif %}
                </div>

                <div class='py-5 content-center'>
                    {% if swHeadsImpBool[1] %}
                        <div class='text-2xl'>Solo</div>
                            <div class="flex justify-between">
                                <div>
                                    {% for item in swHeadsListList[1] %}
                                        <b><span class="{{item[2]}}">{{item[0]}}:</b></span> <b>{{item[1]| those}}</b> ({{item[3]}}%)<br>
                                    {% endfor %}</p>
                                </div>
                                <div class='headscontsolo'>
                                    <canvas id="headssolo" style="width:100%;height:100%;"></canvas>
                                    <script>
                                    var ctx = document.getElementById('headssolo');
                                    // @ts-ignore
                                    var swHLS = {{swHeadsRawSolo}};
                                    Chart.defaults.global.defaultFontFamily = 'Inconsolata'
                                    Chart.defaults.global.defaultFontSize = 15
                                    var headssolo = new Chart(ctx, {
                                        type: 'doughnut',
                                        responsive: true,
                                        maintainAspectRatio:false,
                                        options: {
                                            legend: {
                                                display:false,
                                            }
                                        },
                                        data: {
                                            labels: ['Heavenly', 'Divine', 'Sweet', 'Succulent', 'Tasty', 'Salty', 'Decent', 'Meh', 'Yucky', 'Eww'],
                                            datasets: [{
                                                data: swHLS,
                                                borderWidth: 1,
                                                backgroundColor: ['#a0a', '#fa0', '#5ff', '#f5f', '#0aa', '#5f5', '#ff5', '#ccc', '#aaa', '#555'],
                                            }]
                                        },
                                    });
                                    </script>
                                </div>
                            </div>
                    {% else %}
                        <p>No heads collected in Solo.</p>
                    {% endif %}
                </div>

                <div class='py-5 content-center'>
                    {% if swHeadsImpBool[2] %}
                    <div class='text-2xl'>Teams</div>
                            <div class="flex justify-between">
                                <div>
                                    {% for item in swHeadsListList[2] %}
                                        <b><span class="{{item[2]}}">{{item[0]}}:</b></span> <b>{{item[1]| those}}</b> ({{item[3]}}%)<br>
                                    {% endfor %}</p>
                                </div>
                                <div class='headscontteam'>
                                    <canvas id="headsteam" style="width:100%;height:100%;"></canvas>
                                    <script>
                                    var ctx = document.getElementById('headsteam');
                                    // @ts-ignore
                                    var swHLT = {{swHeadsRawTeam}};
                                    Chart.defaults.global.defaultFontFamily = 'Inconsolata'
                                    Chart.defaults.global.defaultFontSize = 15
                                    var headsteam = new Chart(ctx, {
                                        type: 'doughnut',
                                        responsive: true,
                                        maintainAspectRatio:false,
                                        options: {
                                            legend: {
                                                display:false,
                                            }
                                        },
                                        data: {
                                            labels: ['Heavenly', 'Divine', 'Sweet', 'Succulent', 'Tasty', 'Salty', 'Decent', 'Meh', 'Yucky', 'Eww'],
                                            datasets: [{
                                                data: swHLT,
                                                borderWidth: 1,
                                                backgroundColor: ['#a0a', '#fa0', '#5ff', '#f5f', '#0aa', '#5f5', '#ff5', '#ccc', '#aaa', '#555'],
                                            }]
                                        },
                                    });
                                    </script>
                                </div>
                            </div>
                    {% else %}
                        <p>No heads collected in Teams.</p>
                    {% endif %}
                </div>
            </div>

            <!-- Kills via -->
            <div class='col-start-6 col-end-10 bg-gray-100 rounded-2xl p-6 shadow divide-y divide-gray-300'>
                <div class="text-3xl font-semibold pb-5">Kills via</div>
                <div class="flex justify-between pt-5">
                    {% if swKillTypeList['success'] == True %}
                        <div>
                            {% if swKillTypeList['success'] %}
                                {% if swKillTypeList['melee'][0] %}
                                <span style='color:#4357ad'>Melee</span>: <b>{{swKillTypeList['melee'][0]}} kills</b> ({{swKillTypeList['melee'][1]}})<br>
                                {% endif %}
                                {% if swKillTypeList['void'][0] %}
                                <span style='color:#48a9a6'>Void</span>: <b>{{swKillTypeList['void'][0]}} kills</b> ({{swKillTypeList['void'][1]}})<br>
                                {% endif %}
                                {% if swKillTypeList['bow'][0] %}
                                <span style='color:#e4dfda'>Bow</span>: <b>{{swKillTypeList['bow'][0]}} kills</b> ({{swKillTypeList['bow'][1]}})<br>
                                {% endif %}
                                {% if swKillTypeList['mob'][0] %}
                                <span style='color:#D4B483'>Mob</span>: <b>{{swKillTypeList['mob'][0]}} kills</b> ({{swKillTypeList['mob'][1]}})<br>
                                {% endif %}
                                {% if swKillTypeList['fall'][0] %}
                                <span style='color:#C1666B'>Fall</span>: <b>{{swKillTypeList['fall'][0]}} kills</b> ({{swKillTypeList['fall'][1]}})<br>
                                {% endif %}
                                {% if swKillTypeList['other'][0] %}
                                <span style='color:#F42521'>Other</span>: <b>{{swKillTypeList['other'][0]}} kills</b> ({{swKillTypeList['other'][1]}})<br>
                                {% endif %}
                            {% endif %}
                        </div>
                        <div class='canvasContainer'>
                            <canvas id="myChart" height='176'></canvas>
                            <script>
                            var ctx = document.getElementById('myChart');
                            // @ts-ignore
                            var swKTL = {{swKTLList}};
                            Chart.defaults.global.defaultFontFamily = 'Inconsolata'
                            Chart.defaults.global.defaultFontSize = 15
                            var myChart = new Chart(ctx, {
                                type: 'doughnut',
                                responsive: true,
                                maintainAspectRatio:false,
                                options: {
                                    legend: {
                                        display:false,
                                    }
                                },
                                data: {
                                    labels: ['Melee', 'Void', 'Bow', 'Mob', 'Fall', 'Other'],
                                    datasets: [{
                                        data: swKTL,
                                        borderWidth: 1,
                                        backgroundColor: [
                                            '#4357ad',
                                            '#48a9a6',
                                            '#e4dfda',
                                            '#D4B483',
                                            '#C1666B',
                                            '#F42521',
                                        ],
                                    }]
                                },
                            });
                            </script>
                        </div>
                    {% else %}
                        <p>Nothing to show here.</p>
                    {% endif %}
                </div>
            </div>

            <!-- Time Wasted -->
            <div class="col-start-6 col-end-10 row-span-2 bg-gray-100 rounded-2xl p-6 shadow divide-y divide-gray-300">
                <div class='text-3xl font-semibold pb-5'>Time Wasted</div>
                <div class="pt-5">
                    {% if swTimeLists[0][5] != '0s' %}
                        <div class='canvasContainer2'>
                            <canvas id="myChart2" style="width:25%;"></canvas>
                            <script>
                            var ctx = document.getElementById('myChart2');
                            // @ts-ignore
                            var swTWL = {{swTimeListPercMinusOverall}}
                            Chart.defaults.global.defaultFontFamily = 'Inconsolata'
                            Chart.defaults.global.defaultFontSize = 15
                            var myChart2 = new Chart(ctx, {
                                type: 'bar',
                                responsive: true,
                                maintainAspectRatio:false,
                                data: {
                                    labels: ['Solo', 'Teams', 'Mega', 'Ranked', 'Laboratory'],
                                    datasets: [{
                                        data: swTWL,
                                        borderWidth: 1,
                                        backgroundColor: [
                                            '#283044',
                                            '#78a1bb',
                                            '#ebf5ee',
                                            '#8b786d',
                                        ]
                                    }]
                                },
                                options: {
                                    legend: {
                                        display:false,
                                    },
                                    title: {
                                        display: true,
                                        text: 'Share of gamemodes played (%)',
                                    },
                                },
                            });
                            </script>
                        </div>
                        <p>Since their first login, {{username}} has spent <b>{{ swKWperLists[2] }}%</b> of their life playing SkyWars. </p>
                        <div class="grid grid-cols-2 gap-10 justify-around">
                            <div>
                                <p>
                                    <b>{{ swTimeLists[0][5] }}</b> in total <br>
                                    {% for mode in range(5) %}
                                        {{ swTimeModeList[mode] }}: <b>{{ swTimeLists[0][mode] }} ({{swTimeLists[1][mode]}}%) </b><br>
                                    {% endfor %}
                                </p>
                                <p>
                                    {% for item in swUnitConvList2 %}
                                        {{ item[0] }}<b>{{ '{0:,}'.format(item[1]) }}</b>{{ item[2] }} <br>
                                    {% endfor %}
                                </p>
                            </div>
                            <div>
                                <p>
                                    {% for item in swUnitConvList %}
                                        <b>{{ '{0:,}'.format(item[0]) }}</b> {{ item[1] }} <br>
                                    {% endfor %}
                                </p>
                                <p>
                                    {% for item in swKWperLists[0] %}
                                        <b>{{item[0]| thraw}}</b> kills per {{item[1]}}<br>
                                    {% endfor %}
                                    {% for item in swKWperLists[1] %}
                                        <b>{{item[0]| thraw}}</b> wins per {{item[1]}}<br>
                                    {% endfor %}
                                </p>
                            </div>
                        </div>
                    {% else %}
                        <p>Nothing to show here.</p>
                    {% endif %}
                </div>
            </div>

            <!-- Souls -->
            <div class="col-start-2 col-end-6 bg-gray-100 rounded-2xl p-6 shadow divide-y divide-gray-300">
                <div class="text-3xl font-semibold pb-5">Souls</div>
                <div class="flex justify-between pt-5">
                {% if swStatsDict['souls'] %}
                    <div>
                        <p>
                            <span class="gray"><b>{{swSoulList['souls'] | those}}</b> souls</span> <br>
                            <b>{{swSoulList['souls_gathered'] | those}}</b> souls harvested <br>
                            <b>{{swSoulList['paid_souls'] | those}}</b> souls bought <br>
                            <b>{{swSoulList['souls_gathered_lab'] | those}}</b> ({{swSoulList['labperc'][0]}}%) souls from Lab <br>
                            <b>{{swSoulList['souls_nonlab'] | those}}</b> ({{swSoulList['labperc'][1]}}%) souls from non-Lab<br>
                            <span class="gold"><b>{{swSoulList['soul_well_legendaries'] | those}}</b> legendaries</span> <br>
                            <span class="blue"><b>{{swSoulList['soul_well_rares'] | those}}</b> rares</span> <br>
                            <span class="green"><b>{{swSoulList['soul_well_commons'] | those}}</b> commons</span> <br>
                            <b>{{swSoulList['soul_well'] | those}}</b> soul well uses <br>
                        </p>
                    </div>
                    <div class='canvasContainerSouls'>
                        <canvas id="myChartSouls" style="width:100%;height:100%;"></canvas>
                        <script>
                        var ctx = document.getElementById('myChartSouls');
                        // @ts-ignore
                        var swSRL = {{swSoulsRaritiesList}};
                        Chart.defaults.global.defaultFontFamily = 'Inconsolata'
                        Chart.defaults.global.defaultFontSize = 15
                        var myChartSouls = new Chart(ctx, {
                            type: 'doughnut',
                            responsive: true,
                            maintainAspectRatio:true,
                            options: {
                                legend: {
                                    display:false,
                                }
                            },
                            data: {
                                labels: ['Commons', 'Rares', 'Legendaries'],
                                datasets: [{
                                    data: swSRL,
                                    borderWidth: 1,
                                    backgroundColor: [
                                        '#5f5',
                                        '#55f',
                                        '#fa0',
                                    ],
                                }]
                            },
                        });
                        </script>
                    </div>
                {% else %}
                    <p>No souls harvested.</p>
                {% endif %}
                </div>
            </div>

            <!-- Favorite Maps & Cages-->
            <div class="col-start-2 col-end-6 bg-gray-100 rounded-2xl p-6 shadow divide-y divide-gray-300">
                <div class="text-3xl font-semibold pb-5">Favorite Maps & Cages</div>
                <div class="pt-5">
                    <p>
                        {% if not swMapsList %}
                        <p>No favorite maps.</p>
                        {% else %}
                        <b>Favorite Maps 🗺️:</b> {{swMapsList}}
                        {% endif %}
                    </p>
                    <p>
                        {% if not swCagesList %}
                        <p>No cages unlocked.</p>
                        {% else %}
                        <b>Cages unlocked 📦:</b> {{swCagesList}}
                        {% endif %}
                    </p>
                </div>
            </div>

            <!-- Angel's Descent -->
            <div class="col-start-6 col-end-10 bg-gray-100 rounded-2xl p-6 shadow divide-y divide-gray-300">
                <div class="text-3xl font-semibold pb-5">Angel's Descent</div>
                <div class="pt-5">
                    {% if swOpals['shards'] %}
                        {% for a, b in swOpals.items() %}
                            {% if a == 'shards per kill' or a == 'shards per game' or a == 'opals from prestige' %}
                                <b>{{b}}</b> {{a}} <br>
                            {% elif a == 'opals' %}
                                <span class="dark_blue"><b>{{b| those}}</b> {{a}}</span><br>
                            {% elif a == 'shards' %}
                                <span class="aqua"><b>{{b| those}}</b> {{a}}</span><br>
                            {% elif a == 'until next opal' %}
                                <b>{{b| those}}</b> ({{swOpals['shardsTilNextPerc']}}%) shards until next opal <br>
                                    {% for x in range(swOpals['shardsTilNextPrBa']) %}<b><span class="dark_blue">/</span></b>{% endfor %}{% for x in range(32-swOpals['shardsTilNextPrBa']) %}<span class='blue'>/</span>{% endfor %}<br>
                            {% elif a == 'shard_solo' %}
                                <b>{{b| those}}</b> shards from solo ({{swOpals['shard_solo_perc']}}%) <br>
                            {% elif a == 'shard_team' %}
                                <b>{{b| those}}</b> shards from teams ({{swOpals['shard_team_perc']}}%) <br>
                            {% endif %}
                        {% endfor %}
                    {% else %}
                        <p>No participation in Angel's Descent.</p>
                    {% endif %}
                </div>
            </div>

            <!-- Challenges -->
            <div class="col-start-2 col-end-6 bg-gray-100 rounded-2xl p-6 shadow divide-y divide-gray-300">
                <div class="text-3xl font-semibold pb-5">Challenges</div>
                    <div class='grid grid-cols-2 pt-5'>
                        {% if swChalAtt['overall'] %}
                        <div>
                            <p>
                                <b>🏹 Archer attempts</b>: {{swChalAtt['archer']}} <br>
                                <b>💔 Half Health attempts</b>: {{swChalAtt['half_health']}} <br>
                                <b>🚯 No Block attempts</b>: {{swChalAtt['no_block']}} <br>
                                <b>🚭 No Chest attempts</b>: {{swChalAtt['no_chest']}} <br>
                                <b>📃 Paper attempts</b>: {{swChalAtt['paper']}} <br>
                                <b>🐓 Rookie attempts</b>: {{swChalAtt['rookie']}} <br>
                                <b>🍏 UHC attempts</b>: {{swChalAtt['uhc']}} <br>
                                <b>🗡️ Ultimate Warrior attempts</b>: {{swChalAtt['ultimate_warrior']}} <br>
                            </p>
                            <p>
                                {% for num, items in swChalAttNum.items() %}
                                    <b>{{num}}-challenge attempts</b>: {{items}} <br>
                                {% endfor %}
                            </p>
                        </div>
                        <div>
                            <p>
                                <b>🏹 Archer wins</b>: {{swChalAtt['archer']}} <br>
                                <b>💔 Half Health wins</b>: {{swChalAtt['half_health']}} <br>
                                <b>🚯 No Block wins</b>: {{swChalAtt['no_block']}} <br>
                                <b>🚭 No Chest wins</b>: {{swChalAtt['no_chest']}} <br>
                                <b>📃 Paper wins</b>: {{swChalAtt['paper']}} <br>
                                <b>🐓 Rookie wins</b>: {{swChalAtt['rookie']}} <br>
                                <b>🍏 UHC wins</b>: {{swChalAtt['uhc']}} <br>
                                <b>🗡️ Ultimate Warrior wins</b>: {{swChalAtt['ultimate_warrior']}} <br>
                            </p>
                            <p>
                                {% for num, items in swChalAttNum.items() %}
                                    <b>{{num}}-challenge wins</b>: {{items}} <br>
                                {% endfor %}
                            </p>
                        </div>
                {% else %}
                    <p>No challenge attempts.</p>
                {% endif %}
                </div>
            </div>

            <!-- Cosmetics -->
            <div class="col-start-6 col-end-10 bg-gray-100 rounded-2xl p-6 shadow divide-y divide-gray-300">
                <div class="text-3xl font-semibold pb-5">Cosmetics</div>
                <p class='pt-5'>
                {% if swCosmetics %}
                    {% if 'balloon' in swCosmetics %}
                        <b>Balloon</b>: {{swCosmetics['balloon']}} <br>
                    {% endif %}
                    {% if 'cage' in swCosmetics %}
                    <b>Cage</b>: {{swCosmetics['cage']}} <br>
                    {% endif %}
                    {% if 'deathcry' in swCosmetics %}
                    <b>Death cry</b>: {{swCosmetics['deathcry']}} <br>
                    {% endif %}
                    {% if 'killeffect' in swCosmetics %}
                    <b>Kill effect</b>: {{swCosmetics['killeffect']}} <br>
                    {% endif %}
                    {% if 'killmessages' in swCosmetics %}
                    <b>Kill messages</b>: {{swCosmetics['killmessages']}} <br>
                    {% endif %}
                    {% if 'projectiletrail' in swCosmetics %}
                    <b>Projectile Trail</b>: {{swCosmetics['projectiletrail']}} <br>
                    {% endif %}
                    {% if 'sprays' in swCosmetics %}
                    <b>Spray</b>: {{swCosmetics['sprays']}} <br>
                    {% endif %}
                    {% if 'victorydance' in swCosmetics %}
                    <b>Victory Dance</b>: {{swCosmetics['victorydance']}} <br>
                    {% endif %}
                {% else %}
                    No cosmetics selected.
                {% endif %}
                </p>
            </div>
                
        <!-- BedWars -->
        <div class="col-start-2 col-end-10 bg-gray-100 rounded-2xl text-4xl font-bold p-6 shadow text-center">BedWars</div>
            
            <!-- Overall -->
            <div class="col-start-2 col-end-4 bg-gray-100 rounded-2xl p-6 shadow divide-y divide-gray-300">
                <p>
                    <b><span class="{{bwOverallStats['prestige'][1]}}">
                        [{{bwOverallStats['level']| those}}☆]
                    </span></b>
                    {{username}} <br>
                    <b><span class="{{bwOverallStats['prestige'][1]}}">
                        {{bwOverallStats['prestige'][0]}}
                    </span></b>
                    Prestige - <b>{{bwOverallStats['prestige'][2]}}%</b> to
                    <b><span class="{{bwOverallStats['prestige'][1]}}">[{{(bwOverallStats['level']+1)| those}}☆]
                    </span></b>
                    <br>
                {{bwOverallStats['Experience']| those}} experience <br></p>
                {{bwOverallStats['games_played_bedwars']| those}} games played <br>
                {{bwOverallStats['K/D']}} K/D<br>
                {{bwOverallStats['finK/D']}} final K/D<br>
                {{bwOverallStats['kills_bedwars']| those}} kills<br>
                {{bwOverallStats['deaths_bedwars']| those}} deaths<br>
                {{bwOverallStats['final_kills_bedwars']| those}} final kills<br>
                {{bwOverallStats['final_deaths_bedwars']| those}} final deaths<br>
                {{bwOverallStats['K/FD']}} kills/final deaths<br>
                {{bwOverallStats['FK/D']}} final kills/deaths<br>
                {{bwOverallStats['winstreak']| those}} winstreak<br>
                {{bwOverallStats['W/L']}} W/L<br>
                {{bwOverallStats['winrate']}}% win rate<br>
                {{bwOverallStats['wins_bedwars']| those}} wins<br>
                {{bwOverallStats['losses_bedwars']| those}} losses<br>
                {{bwOverallStats['beds_broken_bedwars']| those}} beds broken<br>
                {{bwOverallStats['beds_lost_bedwars']| those}} beds lost<br>
                {{bwOverallStats['B/L']}} bed break/lose<br>
                {{bwOverallStats['_items_purchased_bedwars']| those}} items bought<br>
                {{bwOverallStats['resources_collected_bedwars']| those}} resources collected<br>
            </div>

            <!-- BedWars by mode -->
            <div class="col-start-4 col-end-10 bg-gray-100 rounded-2xl p-6 shadow divide-y divide-gray-300">
                <div class="text-3xl font-semibold pb-5">BedWars - by Mode</div>
                <div class='pt-5'>
                    {% if bwOverallStats['games_played_bedwars'] > 0 %}
                        {% if bwMKWList[3] != '' and bwMKWList[4] != '' and bwMKWList[5] != '' %}
                            <p>{{username}} plays <b>{{bwMKWList[3]}}</b> the most, has the highest K/D in <b>{{bwMKWList[4]}}</b>, and has the highest W/L in <b>{{bwMKWList[5]}}</b>.
                        {% endif %}
                        <div class='flex gap-4'>
                            <div class='tabsBedWarsModes'>
                                {% for mode in bwModeStats %}
                                    {% if bwModeStats[mode]['games_played_bedwars'][0] > 0 %}
                                        <button class="bwTabLinks text-2xl text-gray-600 font-bold leading-tight" onclick="bwTabs(event, '{{mode}}')" id="defaultOpenBw">{{bwTranslateList[mode]}}</button><br>
                                    {% endif %}
                                {% endfor %}
                            </div>
                            {% for mode in bwModeStats %}
                                {% if bwModeStats[mode]['games_played_bedwars'][0] > 0 %}
                                    <div id='{{mode}}' class='bwTabContent'>
                                        <p>
                                            {% if bwCompList[mode]['compkd'][0] > 100000 %}
                                                <span class="almost"><b>infinite</b></span> K/D
                                            {% elif bwCompList[mode]['compkd'][0] > 0 %}
                                                <span class="dark_green"><b>{{bwCompList[mode]['compkd'][0] | abs }}</b></span> higher K/D (<span class="dark_green">+{{bwCompList[mode]['compkd'][1]}}%</span>)
                                            {% else %}
                                                <span class="red"><b>{{bwCompList[mode]['compkd'][0] | abs}}</b></span> lower K/D (<span class="red">{{bwCompList[mode]['compkd'][1]}}%</span>)
                                            {% endif %}
                                            •
                                            {% if bwCompList[mode]['compfkd'][0] > 100000 %}
                                                <span class="almost"><b>infinite</b></span> final K/D
                                            {% elif bwCompList[mode]['compfkd'][0] > 0 %}
                                                <span class="dark_green"><b>{{bwCompList[mode]['compfkd'][0]| abs}}</b></span> higher final K/D (<span class="dark_green">+{{bwCompList[mode]['compfkd'][1]}}%</span>)
                                            {% else %}
                                                <span class="red"><b>{{bwCompList[mode]['compfkd'][0]| abs}}</b></span> lower final K/D (<span class="red">{{bwCompList[mode]['compfkd'][1]}}%</span>)
                                            {% endif %}
                                            •
                                            {% if bwCompList[mode]['compwl'][0] > 100000 %}
                                                <span class="almost"><b>infinite</b></span> W/L
                                            {% elif bwCompList[mode]['compwl'][0] > 0 %}
                                                <span class="dark_green"><b>{{bwCompList[mode]['compwl'][0]| abs}}</b></span> higher W/L (<span class="dark_green">+{{bwCompList[mode]['compwl'][1]}}%</span>)
                                            {% else %}
                                                <span class="red"><b>{{bwCompList[mode]['compwl'][0]| abs}}</b></span> lower W/L (<span class="red">{{bwCompList[mode]['compwl'][1]}}%</span>)
                                            {% endif %}
                                        </p>
                    
                                        <p>
                                            {{ bwModeStats[mode]['kills_bedwars'][0]| those }} kills ({{ bwModeStats[mode]['kills_bedwars'][1]}}%) <br>
                                            {{ bwModeStats[mode]['deaths_bedwars'][0]| those }} deaths ({{ bwModeStats[mode]['deaths_bedwars'][1]}}%) <br>
                                            {{ bwModeStats[mode]['K/D'] }} K/D <br>
                                            {{ bwModeStats[mode]['final_kills_bedwars'][0]| those }} final kills ({{ bwModeStats[mode]['final_kills_bedwars'][1]}}%) <br>
                                            {{ bwModeStats[mode]['final_deaths_bedwars'][0]| those }} final deaths ({{ bwModeStats[mode]['final_deaths_bedwars'][1]}}%) <br>
                                            {{ bwModeStats[mode]['finK/D'] }} final K/D<br>
                                            {{ bwModeStats[mode]['K/FD'] }} kills/final deaths<br>
                                            {{ bwModeStats[mode]['FK/D'] }} final kills/deaths<br>
                                            {{ bwModeStats[mode]['games_played_bedwars'][0]| those }} games played ({{ bwModeStats[mode]['games_played_bedwars'][1]}}%) <br>
                                            {{ bwModeStats[mode]['winstreak'][0]| those }} winstreak<br>
                                            {{ bwModeStats[mode]['wins_bedwars'][0]| those }} wins ({{ bwModeStats[mode]['wins_bedwars'][1]}}%) <br>
                                            {{ bwModeStats[mode]['losses_bedwars'][0]| those }} losses ({{ bwModeStats[mode]['losses_bedwars'][1]}}%) <br>
                                            {{ bwModeStats[mode]['W/L'] }} W/L<br>
                                            {{ bwModeStats[mode]['winrate'] }}% win rate<br>
                                            {{ bwModeStats[mode]['beds_broken_bedwars'][0]| those }} beds broken ({{ bwModeStats[mode]['beds_broken_bedwars'][1]}}%) <br>
                                            {{ bwModeStats[mode]['beds_lost_bedwars'][0]| those }} beds lost ({{ bwModeStats[mode]['beds_lost_bedwars'][1]}}%) <br>
                                            {{ bwModeStats[mode]['B/L'] }} bed break/lose ratio <br>
                                            {{ bwModeStats[mode]['_items_purchased_bedwars'][0]| those}} items purchased ({{ bwModeStats[mode]['_items_purchased_bedwars'][1]}}%) <br>
                                            {{ bwModeStats[mode]['purc/game']}} items purchased per game <br>
                                            {{ bwModeStats[mode]['resc/game']}} resources collected per game <br>
                                            {{ bwModeStats[mode]['resources_collected_bedwars'][0]| those}} resources collected ({{ bwModeStats[mode]['resources_collected_bedwars'][1]}}%) <br>
                                            {{ bwModeStats[mode]['iron_resources_collected_bedwars'][0]| those }} iron collected ({{ bwModeStats[mode]['iron_resources_collected_bedwars'][1]}}%) <br>
                                            {{ bwModeStats[mode]['gold_resources_collected_bedwars'][0]| those }} gold collected ({{ bwModeStats[mode]['gold_resources_collected_bedwars'][1]}}%) <br>
                                            {{ bwModeStats[mode]['diamond_resources_collected_bedwars'][0]| those }} diamonds collected ({{ bwModeStats[mode]['diamond_resources_collected_bedwars'][1]}}%) <br>
                                            {{ bwModeStats[mode]['emerald_resources_collected_bedwars'][0]| those }} emeralds collected ({{ bwModeStats[mode]['emerald_resources_collected_bedwars'][1]}}%) <br>
                                        </p>
                                    </div>
                                {% endif %}
                            {% endfor %}
                        </div>
                    {% else %}
                    <p>No stats to show!</p>
                    {% endif %}
                </div>
            </div>

            <!-- Kills via -->
            <div class="col-start-2 col-end-6 bg-gray-100 rounded-2xl p-6 shadow divide-y divide-gray-300">
                <div class="text-3xl font-semibold pb-5">Kills via</div>
                <div class='flex justify-between pt-5'>
                    {% if bwOverallStats['kills_bedwars'] %}
                        <div>
                            <p>
                                <b>🗡 Melee</b>: {{bwKillsList[0]['🗡 Melee'][0]| those}} ({{bwKillsList[0]['🗡 Melee'][1]}}%)<br>
                                {% for name, num in bwKillsList[0].items() %}
                                    {% if 'Melee' not in name %}
                                        <b>{{name}}</b>: {{num[0]| those}} ({{num[1]}}%)<br>
                                    {% endif %}
                                {% endfor %}
                            </p>
                            <p>
                                {% for name, num in bwKillsList[1].items() %}
                                    {% if num != 0 %}
                                        <b>{{name}}</b>: {{num| those}} <br>
                                    {% endif %}
                                {% endfor %}
                            </p>
                        </div>
                        <div class='canvasKillsVia'>
                            <canvas id="killsvia" style="width:100%;height:100%;"></canvas>
                            <script>
                            var ctx = document.getElementById('killsvia');
                            // @ts-ignore
                            var killsvia = {{bwPureKillsLists[0]}};
                            Chart.defaults.global.defaultFontFamily = 'Inconsolata'
                            Chart.defaults.global.defaultFontSize = 15
                            var killsva = new Chart(ctx, {
                                type: 'doughnut',
                                responsive: true,
                                maintainAspectRatio:false,
                                options: {
                                    legend: {
                                        display:false,
                                    }
                                },
                                data: {
                                    labels: ['Projectile', 'Void', 'Magic', 'Entity', 'Entity explosion', 'Fire', 'Fall Damage', 'Melee'],
                                    datasets: [{
                                        data: killsvia,
                                        borderWidth: 1,
                                        backgroundColor: [
                                            '#2364AA',
                                            '#3DA5D9',
                                            '#73BFB8',
                                            '#FEC601',
                                            '#EA7317',
                                            '#5F1A37',
                                            '#04030F',
                                            '#AF5D63',
                                        ],
                                    }]
                                },
                            });
                            </script>
                        </div>
                    {% else %}
                        <p>Nothing to show here.</p>
                    {% endif %}
                </div>
            </div>
            
            <!-- Loot crates -->
            <div class="col-start-6 col-end-10 bg-gray-100 rounded-2xl p-6 shadow divide-y divide-gray-300">
                <div class="text-3xl font-semibold pb-5">Loot Crates</div>
                <div class='flex justify-between pt-5'>
                    {% if bwLootBoxes['bedwars_box'] %}
                        <div>
                            <p>
                                <b>Total loot crates</b>: {{bwLootBoxes['bedwars_box']| those}} <br>
                                <b>Current loot crates</b>: {{bwLootBoxes['bedwars_boxes'][0]| those}} ({{bwLootBoxes['bedwars_boxes'][1]}}%) <br>
                            </p>
                            <p>
                                <b><span class="gold">Legendaries</span></b>: {{bwLootBoxes['bedwars_box_legendaries'][0]| those}} ({{bwLootBoxes['bedwars_box_legendaries'][1]}}%) <br>
                                <b><span class="dark_purple">Epics</span></b>: {{bwLootBoxes['bedwars_box_epics'][0]| those}} ({{bwLootBoxes['bedwars_box_epics'][1]}}%) <br>
                                <b><span class="blue">Rares</span></b>: {{bwLootBoxes['bedwars_box_rares'][0]| those}} ({{bwLootBoxes['bedwars_box_rares'][1]}}%) <br>
                                <b><span class="green">Commons</span></b>: {{bwLootBoxes['bedwars_box_commons'][0]| those}} ({{bwLootBoxes['bedwars_box_commons'][1]}}%) <br>
                            </p>
                            <p>
                                <b>🧧 <span class="red">Lunar</span> Crates</b>: {{bwLootBoxes['bedwars_lunar_boxes'][0]| those}} ({{bwLootBoxes['bedwars_lunar_boxes'][1]}}%) <br>
                                <b>🐇 <span class="aqua">Easter</span> Crates</b>: {{bwLootBoxes['bedwars_easter_boxes'][0]| those}} ({{bwLootBoxes['bedwars_easter_boxes'][1]}}%) <br>
                                <b>🎃 <span class="orange">Halloween</span> Crates</b>: {{bwLootBoxes['bedwars_halloween_boxes'][0]| those}} ({{bwLootBoxes['bedwars_halloween_boxes'][1]}}%) <br>
                                <b>🎄 <span class="dark_green">Christmas</span> Crates</b>: {{bwLootBoxes['bedwars_christmas_boxes'][0]| those}} ({{bwLootBoxes['bedwars_christmas_boxes'][1]}}%) <br>
                            </p>
                        </div>
                        <div class='cvLootBox'>
                            <canvas id="lootbox" style="width:100%;height:100%;"></canvas>
                            <script>
                            var ctx = document.getElementById('lootbox');
                            // @ts-ignore
                            var lootboxed = {{bwLootPure[1:5]}};
                            Chart.defaults.global.defaultFontFamily = 'Inconsolata'
                            Chart.defaults.global.defaultFontSize = 15
                            var lootboxer = new Chart(ctx, {
                                type: 'doughnut',
                                responsive: true,
                                maintainAspectRatio:false,
                                options: {
                                    legend: {
                                        display: false,
                                    }
                                },
                                data: {
                                    labels: ['Legendaries','Epics','Rares','Commons'],
                                    datasets: [{
                                        data: lootboxed,
                                        borderWidth: 1,
                                        backgroundColor: [
                                            '#fa0',
                                            '#a0a',
                                            '#55f',
                                            '#5f5',
                                        ],
                                    }]
                                },
                            });
                            </script>
                        </div>
                    {% else %}
                        <p>No loot crates.</p>
                    {% endif %}
                </div>
            </div>

            <!-- Final kills -->
            <div class="col-start-2 col-end-6 bg-gray-100 rounded-2xl p-6 shadow divide-y divide-gray-300">
                <div class="text-3xl font-semibold pb-5">Final kills via</div>
                <div class='pt-5 flex justify-between'>
                    {% if bwOverallStats['final_kills_bedwars'] %}
                        <div>
                            <p><b>🗡 Melee</b>: {{bwKillsList[2]['🗡 Melee'][0]| those}} ({{bwKillsList[2]['🗡 Melee'][1]}}%)<br>
                            {% for name, num in bwKillsList[2].items() %}
                                {% if 'Melee' not in name %}
                                    <b>{{name}}</b>: {{num[0]| those}} ({{num[1]}}%)<br>
                                {% endif %}
                            {% endfor %}</p>
                            {% for name, num in bwKillsList[3].items() %}
                                {% if num != 0 %}
                                    <b>{{name}}</b>: {{num| those}} <br>
                                {% endif %}
                            {% endfor %}
                        </div>
                        <div class='cvFKV'>
                            <canvas id="finkillsvia" style="width:100%;height:100%;"></canvas>
                            <script>
                            var ctx = document.getElementById('finkillsvia');
                            // @ts-ignore
                            var finkillsvia = {{bwPureKillsLists[1]}};
                            Chart.defaults.global.defaultFontFamily = 'Inconsolata'
                            Chart.defaults.global.defaultFontSize = 15
                            var fkillsva = new Chart(ctx, {
                                type: 'doughnut',
                                responsive: true,
                                maintainAspectRatio:false,
                                options: {legend:{display:false}},
                                data: {
                                    labels: ['Projectile', 'Void', 'Magic', 'Entity', 'Entity explosion', 'Fire', 'Fall Damage', 'Melee'],
                                    datasets: [{
                                        data: finkillsvia,
                                        borderWidth: 1,
                                        backgroundColor: [
                                            '#A8763E',
                                            '#F7F3E3',
                                            '#ECF0F1',
                                            '#6F1A07',
                                            '#2B2118',
                                            '#52154E',
                                            '#111344',
                                            '#595F72',
                                        ],
                                    }]
                                },
                            });
                            </script>
                        </div>
                    {% else %}
                        <p>Nothing to show here.</p>
                    {% endif %}
                </div>
            </div>

            <!-- Resources collected -->
            <div class="col-start-6 col-end-10 bg-gray-100 rounded-2xl p-6 shadow divide-y divide-gray-300">
                <div class="text-3xl font-semibold pb-5">Resources collected</div>
                <div class='pt-5 flex justify-between'>
                    {% if bwTotalResources %}
                        <div>
                            <p>
                                <b>Iron collected</b>: {{bwResCol[0]| those}} ({{bwResColPerc[0]}}%) <br>
                                <b>Gold collected</b>: {{bwResCol[1]| those}} ({{bwResColPerc[1]}}%) <br>
                                <b>Diamonds collected</b>: {{bwResCol[2]| those}} ({{bwResColPerc[2]}}%) <br>
                                <b>Emeralds collected</b>: {{bwResCol[3]| those}} ({{bwResColPerc[3]}}%) <br>
                                <b>Presents collected</b>: {{bwResCol[4]| those}} ({{bwResColPerc[4]}}%) <br>
                            </p>
                            <p>
                                <b>Total resources collected</b>: {{bwTotalResources| those}} <br>
                                <b>Total purchased items</b>: {{bwItemsPurchased| those}} <br>
                            </p>
                        </div>
                        <div class='cavResCol'>
                            <canvas id="RESCOL" style="width:100%;height:100%;"></canvas>
                            <script>
                            var ctx = document.getElementById('RESCOL');
                            // @ts-ignore
                            var RESCOL = {{bwResCol}};
                            Chart.defaults.global.defaultFontFamily = 'Inconsolata'
                            Chart.defaults.global.defaultFontSize = 15
                            var rescolss = new Chart(ctx, {
                                type: 'doughnut',
                                responsive: true,
                                maintainAspectRatio:false,
                                options: {legend:{display:false}},
                                data: {
                                    labels: ['Iron','Gold','Diamonds','Emeralds','Wrapped Presents'],
                                    datasets: [{
                                        data: RESCOL,
                                        borderWidth: 1,
                                        backgroundColor: [
                                            '#ccc',
                                            '#fa0',
                                            '#5ff',
                                            '#5f5',
                                            '#f55',
                                        ],
                                    }]
                                },
                            });
                            </script>
                        </div>
                    {% else %}
                        <p>No resources collected.</p>
                    {% endif %}
                </div>
            </div>

            <!-- Cosmetics -->
            <div class="col-start-2 col-end-6 bg-gray-100 rounded-2xl p-6 shadow divide-y divide-gray-300">
                <div class="text-3xl font-semibold pb-5">Cosmetics</div>
                <div class="pt-5">
                    {% if bwCosmetics %}
                        {% for x, y in bwCosmetics.items() %}
                            <b>{{x}}</b>: {{y}}<br>
                        {% endfor %}
                    {% else %}
                        <p>No cosmetics selected.</p>
                    {% endif %}
                </div>
            </div>

        <!-- Guild -->
        {% if guildDict['success'] %}
            <div class="col-start-2 col-end-10 bg-gray-100 rounded-2xl text-4xl font-bold p-6 shadow text-center">
                {% if guildDict['success'] %} 
                    <b>{{guildDict['name']}}</b>
                    {% if guildDict['tag'] %}
                        <b class="{{guildDict['tagColor']}}">[{{guildDict['tag']}}]</b>
                    {% endif %}
                {% endif %}
            </div>

            <div class='col-start-2 col-end-6 bg-gray-100 rounded-2xl p-6 shadow divide-y divide-gray-300'>
                <p>
                    <b>Description</b>: <i>{{guildDict['description']}}</i><br>
                    <b>Guild ID</b>: {{guildDict['_id']}}<br>
                    <b>Date of creation</b>: {{guildDict['created']}}<br>
                    <b>Preferred games</b>: {{guildDict['preferredGamesTL']}}<br>
                </p>
                <p>
                    <b>Guild Level</b>: {{guildDict['level'] | thraw}}<br>
                    <b>Total Guild XP</b>: {{guildDict['exp'] | those}} <br>
                    <b>Lifetime coins</b>: {{guildDict['coinsEver']}}<br>
                    <b>Total coins</b>: {{guildDict['coins']}}<br>
                </p>
                <p>
                    <b>
                        {% if guildDict['joinable'] %}
                            <span class="dark_green">Publicly joinable</span>
                        {% else %}
                            <span class="red">Not publicly joinable</span>
                        {% endif %}<br>
                        {% if guildDict['publiclyListed'] %}
                            <span class="dark_green">Publicly listed</span>
                        {% else %}
                            <span class="red">Not publicly listed</span>
                        {% endif %}<br>
                    </b>
                </p>
                {# if guildDict['legacyRanking'] %}
                    Rank {{guildDict['legacyRanking']}} on leaderboards
                {% else %}
                    Not on leaderboards
                {% endif #}
                <p>
                    <b>Achievement winners</b>: {{guildDict['achievements']['WINNERS']}}<br>
                    <b>Experience kings</b>: {{guildDict['achievements']['EXPERIENCE_KINGS']}}<br>
                    <b>Online players</b>: {{guildDict['achievements']['ONLINE_PLAYERS']}}<br>
                </p>
            </div>
            <div class='col-start-6 col-end-10 bg-gray-100 rounded-2xl p-6 shadow divide-y divide-gray-300'>
                <div class="text-3xl font-semibold pb-5">Members</div>
                <div class="pt-5">
                List of all members in the guild. Remove this text!!!!!! L<><><>
                </div>
            </div>
        {% else %}
            Player is not in a guild.
        {% endif %}
        </div>

    <script src='/static/tabs.js'></script>
</body>
{% endblock %}

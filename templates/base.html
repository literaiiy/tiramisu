{% extends "index.html" %}

<link rel="shortcut icon" type="image/jpg" href="https://i.ibb.co/sw3P3zZ/tiramis2.png"/>
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@500&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Meddon&display=swap" rel="stylesheet">

{% block head %}
<title>Profile for {{ displayname }} | Tiramisu</title>
<link href="{{ url_for('static', filename='base.css') }}" rel="stylesheet" type="text/css">
<!--- HEADER --->
<header>
{% endblock %}

{% block content %}
<!--- SUBTITLE --->
</header>
<body>

<!--- USERNAME --->
<div class="username">
    {% if '+++' in rank %}
        <h2><span class="light_purple"><b>[{{ rank.replace('+++','') }}<span class="mvpaqua">+++</span>]</b></span> {{ displayname }}</h2>
    {% elif '++' in rank %}
        <h2><span class="{{ rankcolor }}"><b>[{{ rank.replace('++','') }}<span class="{{ pluscolor }}">++</span>]</b></span> {{ displayname }}</h2>
    {% elif '+' in rank %}
        <h2><span class="{{ rankcolor }}"><b>[{{ rank.replace('+','') }}<span class="{{ pluscolor }}">+</span>]</b></span> {{ displayname }}</h2>
    {% elif rank != '' and 'YOUTUBE' not in rank %}
        <h2><span class="{{ rankcolor }}"><b>[{{ rank }}]</b></span> {{ displayname }}</h2>
    {% elif rank == '' %}
        <h2>{{ displayname }}</h2>
    {% elif 'YOUTUBE' in rank %}
        <h2><span class="{{ rankbracketcolor }}"><b>[</b></span><span class="gray"></span><b>{{ rank }}</b></span><span class="{{ rankbracketcolor }}"><b>]</b></span> {{ displayname }}</h2>
    {% endif %}
</div>
{{ uuid }}
<hr>

<div class="row">
    <div class="columnA">
        <!--- NAME HISTORY --->
        <div style="width:auto;height:25%;line-height:3em;overflow:auto;padding:5px;border:1px solid #000000;margin-left:15%;margin-right:15%">
                <table>
                    <tr>
                        <th>#</th>
                        <th>Name</th> 
                        <th>Time changed</th>
                        <th>Duration had</th>
                    </tr>
                    {% for dict_item in namehis %}
                    <tr>
                        {% for value in dict_item.values() %}
                            {% if value|int != 0 %}
                                <td><b>{{ value }}</b></td>
                            {% elif value == namehis[0]['name'] %}
                                <td style="color:midnightblue"><a href="/p/{{ value }}" style="text-decoration:none" >{{ value }}</a></td>
                            {% elif value == namehis[namehis|length-1]['name'] %}
                                <td style="color:rgb(135, 170, 235)"><a href="/p/{{ value }}" style="text-decoration:none" >{{ value }}</a></td>
                            {% elif value in dict_item['name'] %}
                                <td style="color:rgb(107, 137, 221)"><a href="/p/{{ value }}" style="text-decoration:none" >{{ value }}</a></td>
                            {% else %}
                                <td>{{ value }}</td>
                            {% endif %}
                        {% endfor %}
                    </tr>
                    {% endfor %}
                </table>
        </div>
        </body>
    </div>
    <div class="columnB">
        <div class="vl"></div>

        <!------ PLAYER DESC ------>
        <div class="desc">
        <p>
        <!--- SESSION --->
        {% if currentSession != False %}
            <p style='color:green;'>Playing <b>{{ currentSession }}</b> - in <b>{{ sessionType }}</b></p>
        {% else %}
            <p style='color:red;'><b>Offline</b></p>
        {% endif %}

        <!--- LEVEL --->
        Level <b>{{ level }} {{ multiplier }}</b> / <b>{{ levelProgress }}%</b> to <b>{{ levelplusone }}</b><br>

        <!--- KARMA --->
        karma is <b>{{ reqList }}</b><br>

        <!--- ACHIEVEMENTS --->
        <b>{{ achievements }}</b> achievements for <b>{{ achpot }}</b> achievement points<br>

        <!--- QUESTS --->
        <b>{{ quests }}</b> quests finished<br>

        <!--- FRIENDS --->
        <b>X</b> friends - LISTLINK<br>
        
        <!--- GUILD --->
        {% if guildList[0] != 0 %}
            <b>{{ guildList[2] }}</b> in guild <b>{{ guildList[1] }} <span class='{{ guildList[3] }}'>[{{ guildList[0] }}]<span></b></p>
        {% endif %}

        <!--- SENIORITY  --->
        {% if firstLoginUnix > 1357027200 %}
        <b>{{ seniority }}</b> - Joined {{ joinedAgoText }} ago<br>
        {% endif %}

        <!--- RANK SENIORITY --->
        {% if 'VIP' in rank or 'MVP' in rank %}
            {% if '+' in rank %}
                <span class="{{ rankcolor }}"><b>[{{ rank.replace('+','') }}<span class="{{ pluscolor }}">+</span>]</b></span> bought <b>{{ boughtPastTime }}</b> - <b>{{ boughtPastRank }}</b> ago
            {% elif boughtPastRank != 0 %}
                <span class="{{ rankcolor }}"><b>[{{ rank }}]</b></span> bought <b>{{ boughtPastTime }}</b> - <b>{{ boughtPastRank }}</b> ago
            {% endif %}
        {% endif %}
        <br>

        <!--- FIRST/LAST LOGIN --->
        <p>
        {% if lastLogoutUnix != 1 %}
            Last logout: <b>{{ lastLogout }}</b>
        {% endif %}
        <br>
        {% if lastLoginUnix != 1 %}
            Last login: <b>{{ lastLogin }}</b>
        {% endif %}
        <br>
        {% if firstLoginUnix != 1 %}
            First login: <b>{{ firstLogin }}</b>
        {% endif %}
        </p>

        <!--- SOCIAL MEDIA --->
        {% if twitter != [] %}
            <span class="twitter"><b>Twitter: </b></span><a href='{{ twitter[1] }}'>@{{ twitter[0] }}</a><br>
        {% endif %}
        {% if instagram != [] %}
            <span class="instagram"><b>Instagram: </b></span><a href='{{ instagram[1] }}'>@{{ instagram[0] }}</a><br>
        {% endif %}
        {% if twitch != [] %}
            <span class="twitch"><b>Twitch: </b></span><a href='{{ twitch[1] }}'>@{{ twitch[0] }}</a><br>
        {% endif %}
        {% if discord != '' and 'discord.gg' not in discord %}
            <span class="discord"><b>Discord: </b></span>@{{ discord }}<br>
        {% elif 'https://discord.gg' in discord or 'http://discord.gg' in discord %}
            <span class="discord"><b>Discord :</b></span> <a href='{{ discord }}'>{{ discord }}</a><br>
        {% elif 'discord.gg' in discord %}
            <span class="discord"><b>Discord: </b></span> <a href='https://{{ discord }}'>{{ discord }}</a><br>
        {% endif %}
        {% if hypixelForums != [] %}
            <span class="hypixelForums"><b>Hypixel Forums:</b></span> <a href='{{ hypixelForums[1] }}'>@{{ hypixelForums[0] }}</a><br>
        {% endif %}
        {% if youtube != [] %}
            <span class="youtube"><b>YouTube: </b></span><a href='{{ youtube[1] }}'>{{ youtube[0] }}</a><br>
        {% endif %}
        </div>
    </div>
</div>

<!--- I don't know what I'm doing --->
<!-- Tab links 
<div class="tab">
<button class="tablinks" onclick="openCity(event, 'London')">London</button>
<button class="tablinks" onclick="openCity(event, 'Paris')">Paris</button>
<button class="tablinks" onclick="openCity(event, 'Tokyo')">Tokyo</button>
</div>

 Tab content 
<script>
    function openCity(evt, cityName) {
        // Declare all variables
        var i, tabcontent, tablinks;
    
        // Get all elements with class="tabcontent" and hide them
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
        }
    
        // Get all elements with class="tablinks" and remove the class "active"
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
    
        // Show the current tab, and add an "active" class to the button that opened the tab
        document.getElementById(cityName).style.display = "block";
        evt.currentTarget.className += " active";
    }
    document.getElementById("defaultOpen").click();
    </script>

<div id="London" class="tabcontent">
<button class="tablinks" onclick="openCity(event, 'London')" id="defaultOpen"></button>
<h3>London</h3>
<p>London is the capital city of England.</p>
</div>

<div id="Paris" class="tabcontent">
<h3>Paris</h3>
<p>Paris is the capital of France.</p>
</div>

<div id="Tokyo" class="tabcontent">
<h3>Tokyo</h3>
<p>Tokyo is the capital of Japan.</p>
</div>
-->

<!------ PLAYER STATS ------>
<div class="stats">

    <!--- SKYWARS STATS --->
    <h2>SkyWars</h2>
    <b>{{ swExp }}</b> SkyWars experience <br>
    <b><span class="{{ swPrestigeColor }}">[{{ swLevel }}â˜†]</b></span>, {{ swPrestige }} Prestige - <span class="{{ swPrestigeColor }}"><b>{{ swToNL }}%</b></span> to <b>{{ swNextLevel }}</b><br>
    <table class='swgeneral'>
        <colgroup>
            <col class="leftsw">
            <col class="rightsw">
        </colgroup>
        <tr>
                <td><b>{{ swGamesPlayed }}</b> games played</td>
                <td><b>{{ swWinstreak }}</b> winstreak </td>
        </tr>
        <tr>
                <td><b>{{ swGamesQuit }}</b> games quit</td>
                <td><b>{{ swSouls }}</b> souls </td>
        </tr>
        <tr>
                <td><b>{{ swKD }}</b> K/D</td>
                <td><b>{{ swHeads }}</b> heads </td>
        </tr>
        <tr>
                <td><b>{{ swKDA }}</b> K/D/A</td>
                <td><b>{{ swCoins }}</b> coins </td>
        </tr>
        <tr>
                <td><b>{{ swKills }}</b> kills - <span class='{{ swHeadColor }}'><b>{{ swHeadDesc }}</b></span></td>
                <td><b>{{ swBlocks }}</b> blocks broken </td>
        </tr>
        <tr>
                <td><b>{{ swAssists }}</b> assists </td>
                <td><b>{{ swEggs }}</b> eggs thrown </td>
        </tr>
        <tr>
                <td><b>{{ swDeaths }}</b> deaths</td>
                <td><b>{{ swArrowsShot }}</b> arrows shot, <b>{{ swArrowsHit }}</b> arrows hit</td>
        </tr>
        <tr>
                <td><b>{{ swWL }}</b> W/L - <b>{{ swWinRate }}%</b> win rate </td>
                <td><b>{{ swArrowRate }}%</b> hit rate</td>
        </tr>
        <tr>
                <td><b>{{ swWins }}</b> wins</td>
                <td>Fastest win: <b>{{ swFastestWin }}</b> </td>
        </tr>
        <tr>
                <td><b>{{ swLosses }}</b> losses </td>
                <td><b>{{ swChestsOpened }}</b> chests opened</td>
        </tr>
        <tr>
                <td><b>{{ swSurvived }}</b> players survived </td>
                <td>Highest kill game: <b>{{ swHighestKills }} kills</b></td>
    </table>
    <p>
    <!-- <h3>Head Collection</h3>
        <p>
            {% for head in headsCollection %}
                {{ head['uuid'] }}'s {{ head['sacrifice'] }} head gathered on {{ head['timestamp'] }} in {{ head['mode'] }} <br>
            {% endfor %} -->
        </p>
</div>
{% endblock %}
<!--- VERSION DETAILS --->
<